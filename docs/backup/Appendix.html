

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Appendix 1 The Benchmarking System &mdash; FedEval  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> FedEval
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Environment.html">2. Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Tutorial.html">3. Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../BenchmarkResults.html">3. Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Reproduce.html">4. Reproduce the Benchmark Results</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">FedEval</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Appendix 1 The Benchmarking System</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/backup/Appendix.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="appendix-1-the-benchmarking-system">
<h1>Appendix 1 The Benchmarking System<a class="headerlink" href="#appendix-1-the-benchmarking-system" title="Permalink to this headline">¶</a></h1>
<img src="images/bm_system.png" width="70%">
<p>Having motivated the need for an easy-to-use and lightweight benchmarking system, we propose a federated benchmarking system shown in this figure. The system contains the following three steps:</p>
<ul class="simple">
<li><p><strong>Step 1:</strong> Distribute the data to all clients, where different strategies can be applied to generate IID or non-IID data.</p></li>
<li><p><strong>Step 2:</strong> Provide the training scripts and distribute the codes to all the clients.</p></li>
<li><p><strong>Step 3:</strong> Training the model. The ACTPR evaluation model will run automatically in this step.</p></li>
</ul>
<p>We used the docker container technology to simulate the server and clients. The isolation between different containers guarantees that our simulation can reflect the real-world application. All the benchmark system is open-sourced, and four benchmark FL datasets are included in the system. Thus researches can implement their new idea and evaluate with ACTPR model very quickly.</p>
</div>
<div class="section" id="appendix-2-datasets-and-hardware">
<h1>Appendix 2 Datasets and Hardware<a class="headerlink" href="#appendix-2-datasets-and-hardware" title="Permalink to this headline">¶</a></h1>
<p>Four datasets are used in the experiments: <a class="reference external" href="http://yann.lecun.com/exdb/mnist/">MNIST</a>, <a class="reference external" href="https://www.cs.toronto.edu/~kriz/cifar.html">CIFAR-10</a>, <a class="reference external" href="https://github.com/TalwalkarLab/leaf#datasets">FEMNIST</a>, <a class="reference external" href="https://github.com/TalwalkarLab/leaf#datasets">CelebA</a>. We perform the classification task on all datasets. FEMNIST is an extended MNIST dataset based on handwritten digits and characters. CelebA builds on the Large-scale CelebFaces Attributes Dataset, and we use the <em>smiling</em> label as the classification target. For the non-IID evaluation, we use different strategies. In MNIST and CIFAR-10, we simulate non-IID by restricting the number of clients’ local image classes. Experiments of each client has 1,2​ and 3 classes are reported. In FEMNIST and CelebA, we have the identity of who generates the data. Thus we partition the data naturally based on the identity, and perform a random shuffle for IID setting.</p>
<p>On average, each client holds 300 images on MNIST and CIFAR-10 datasets, 137 images on the FEMNIST dataset, and 24 images on the CelebA dataset. At each client, we randomly select 80%, 10%, and 10% for training, validation, and testing.</p>
<p>All the experiments run on a cluster of three machines. One machine with Intel(R) Xeon(R) E5-2620 32-core 2.10GHz CPU, 378GB RAM, and two machines with Intel(R) Xeon(R) E5-2630 24-core 2.6GHz CPU, 63GB RAM. We put the server on the first machine and 40, 30, 30 clients on three machines, respectively.</p>
</div>
<div class="section" id="appendix-3-grid-search-for-fedavg-b-c-e">
<h1>Appendix 3 Grid-Search for FedAvg (B, C, E)<a class="headerlink" href="#appendix-3-grid-search-for-fedavg-b-c-e" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://anonymous.4open.science/repository/19c83e2b-0176-4ae2-b231-b260a74794e3/doc/fedavg_grid_search.md">Grid search result for FedAvg.</a></p>
</div>
<div class="section" id="appendix-4-tuning-the-optimizer-and-learning-rate">
<h1>Appendix 4 Tuning the Optimizer and Learning Rate<a class="headerlink" href="#appendix-4-tuning-the-optimizer-and-learning-rate" title="Permalink to this headline">¶</a></h1>
<div class="section" id="results-of-tuning-the-optimizers">
<h2>Results of tuning the optimizers<a class="headerlink" href="#results-of-tuning-the-optimizers" title="Permalink to this headline">¶</a></h2>
<p>The following table show the results of FL accuracy when we vary the learning rate (lr) and optimizers. The experiments are performed on MNIST and FEMNIST datasets, using MLP and LeNet model, FedSGD and FedAvg FL schemas. Among these three optimizers, <strong>Adam can achieve the best accuracy more frequently, and Adam is more robust given different lr</strong>.</p>
<table style="text-align:center">
    <tr>
        <td></td>
        <td colspan="3">MNIST LeNet FedAvg</td>
        <td colspan="3">MNIST LeNet FedSGD</td>
        <td colspan="3">MNIST MLP FedAvg</td>
        <td colspan="3">MNIST MLP FedSGD</td>
    </tr>
    <tr>
        <td>LR</td>
        <td>GD</td>
        <td>Momuntum</td>
        <td>Adam</td>
        <td>GD</td>
        <td>Momuntum</td>
        <td>Adam</td>
        <td>GD</td>
        <td>Momuntum</td>
        <td>Adam</td>
        <td>GD</td>
        <td>Momuntum</td>
        <td>Adam</td>
    </tr>
    <tr>
        <td>0.0001</td>
        <td>0.985</td>
        <td>0.991</td>
        <td>0.99</td>
        <td>0.968</td>
        <td>0.798</td>
        <td>0.984</td>
        <td>0.98</td>
        <td>0.981</td>
        <td>0.983</td>
        <td>0.963</td>
        <td>0.986</td>
        <td>0.981</td>
    </tr>
    <tr>
        <td>0.0005</td>
        <td>0.99</td>
        <td>0.995</td>
        <td>0.992</td>
        <td>0.972</td>
        <td>0.612</td>
        <td>0.995</td>
        <td>0.979</td>
        <td>0.982</td>
        <td>0.986</td>
        <td>0.982</td>
        <td>0.983</td>
        <td>0.984</td>
    </tr>
    <tr>
        <td>0.001</td>
        <td>0.988</td>
        <td>0.993</td>
        <td>0.995</td>
        <td>0.979</td>
        <td>0.623</td>
        <td>0.992</td>
        <td>0.982</td>
        <td>0.986</td>
        <td>0.982</td>
        <td>0.984</td>
        <td>0.981</td>
        <td>0.983</td>
    </tr>
    <tr>
        <td>0.005</td>
        <td>0.993</td>
        <td>0.097</td>
        <td>0.99</td>
        <td>0.189</td>
        <td>0.26</td>
        <td>0.993</td>
        <td>0.983</td>
        <td>0.983</td>
        <td>0.974</td>
        <td>0.658</td>
        <td>0.438</td>
        <td>0.982</td>
    </tr>
    <tr>
        <td>0.01</td>
        <td>0.99</td>
        <td>0.113</td>
        <td>0.983</td>
        <td>0.281</td>
        <td>0.373</td>
        <td>0.994</td>
        <td>0.983</td>
        <td>0.113</td>
        <td>0.957</td>
        <td>0.17</td>
        <td>0.184</td>
        <td>0.981</td>
    </tr>
    <tr>
        <td>CentralAcc</td>
        <td colspan="6">0.995</td>
        <td colspan="6">0.988</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="3">FEMNIST LeNet FedAvg</td>
        <td colspan="3">FEMNIST LeNet FedSGD</td>
        <td colspan="3">FEMNIST MLP FedAvg</td>
        <td colspan="3">FEMNIST MLP FedSGD</td>
    </tr>
    <tr>
        <td>LR</td>
        <td>GD</td>
        <td>Momuntum</td>
        <td>Adam</td>
        <td>GD</td>
        <td>Momuntum</td>
        <td>Adam</td>
        <td>GD</td>
        <td>Momuntum</td>
        <td>Adam</td>
        <td>GD</td>
        <td>Momuntum</td>
        <td>Adam</td>
    </tr>
    <tr>
        <td>0.0001</td>
        <td>0.74</td>
        <td>0.815</td>
        <td>0.803</td>
        <td>0.332</td>
        <td>0.826</td>
        <td>0.651</td>
        <td>0.719</td>
        <td>0.762</td>
        <td>0.798</td>
        <td>0.51</td>
        <td>0.574</td>
        <td>0.682</td>
    </tr>
    <tr>
        <td>0.0005</td>
        <td>0.792</td>
        <td>0.827</td>
        <td>0.846</td>
        <td>0.743</td>
        <td>0.702</td>
        <td>0.81</td>
        <td>0.779</td>
        <td>0.76</td>
        <td>0.754</td>
        <td>0.299</td>
        <td>0.256</td>
        <td>0.779</td>
    </tr>
    <tr>
        <td>0.001</td>
        <td>0.804</td>
        <td>0.826</td>
        <td>0.843</td>
        <td>0.72</td>
        <td>0.515</td>
        <td>0.846</td>
        <td>0.784</td>
        <td>0.072</td>
        <td>0.541</td>
        <td>0.218</td>
        <td>0.12</td>
        <td>0.814</td>
    </tr>
    <tr>
        <td>0.005</td>
        <td>0.833</td>
        <td>0.262</td>
        <td>0.763</td>
        <td>0.125</td>
        <td>0.067</td>
        <td>0.848</td>
        <td>0.767</td>
        <td>0.067</td>
        <td>0.089</td>
        <td>0.079</td>
        <td>0.079</td>
        <td>0.703</td>
    </tr>
    <tr>
        <td>0.01</td>
        <td>0.84</td>
        <td>0.063</td>
        <td>0.618</td>
        <td>0.094</td>
        <td>0.079</td>
        <td>0.848</td>
        <td>0.558</td>
        <td>0.067</td>
        <td>0.067</td>
        <td>0.079</td>
        <td>0.079</td>
        <td>0.439</td>
    </tr>
    <tr>
        <td>CentralAcc</td>
        <td colspan="6">0.85</td>
        <td colspan="6">0.829</td>
    </tr>
</table>
</div>
<div class="section" id="results-of-tuning-the-learning-rate-lr">
<h2>Results of tuning the learning rate (LR)<a class="headerlink" href="#results-of-tuning-the-learning-rate-lr" title="Permalink to this headline">¶</a></h2>
<table style="text-align:center">
    <tr>
        <td></td>
        <td colspan="3">MNIST LeNet FedAvg</td>
        <td colspan="3">MNIST LeNet FedSGD</td>
    </tr>
    <tr>
        <td>LR</td>
        <td>Acc</td>
        <td>CommRound</td>
        <td>TimeAll</td>
        <td>Acc</td>
        <td>CommRound</td>
        <td>TimeAll</td>
    </tr>
    <tr>
        <td>0.0001</td>
        <td>0.99</td>
        <td>174</td>
        <td>13.9</td>
        <td>0.984</td>
        <td>2000</td>
        <td>160.4</td>
    </tr>
    <tr>
        <td>0.0005</td>
        <td>0.992</td>
        <td>113</td>
        <td>8.8</td>
        <td>0.995</td>
        <td>1609</td>
        <td>144</td>
    </tr>
    <tr>
        <td>0.001</td>
        <td>0.995</td>
        <td>104</td>
        <td>8.4</td>
        <td>0.992</td>
        <td>1128</td>
        <td>100.7</td>
    </tr>
    <tr>
        <td>0.005</td>
        <td>0.99</td>
        <td>90</td>
        <td>7.3</td>
        <td>0.993</td>
        <td>286</td>
        <td>26.1</td>
    </tr>
    <tr>
        <td>0.01</td>
        <td>0.983</td>
        <td>53</td>
        <td>4.4</td>
        <td>0.994</td>
        <td>157</td>
        <td>14</td>
    </tr>
    <tr>
        <td>CentralAcc</td>
        <td colspan="6">0.995</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="3">MNIST MLP FedAvg</td>
        <td colspan="3">MNIST MLP FedSGD</td>
    </tr>
    <tr>
        <td>LR</td>
        <td>Acc</td>
        <td>CommRound</td>
        <td>TimeAll</td>
        <td>Acc</td>
        <td>CommRound</td>
        <td>TimeAll</td>
    </tr>
    <tr>
        <td>0.0001</td>
        <td>0.983</td>
        <td>132</td>
        <td>22.3</td>
        <td>0.981</td>
        <td>2000</td>
        <td>855.5</td>
    </tr>
    <tr>
        <td>0.0005</td>
        <td>0.986</td>
        <td>81</td>
        <td>13.7</td>
        <td>0.984</td>
        <td>775</td>
        <td>322.4</td>
    </tr>
    <tr>
        <td>0.001</td>
        <td>0.982</td>
        <td>92</td>
        <td>15.8</td>
        <td>0.983</td>
        <td>427</td>
        <td>177.3</td>
    </tr>
    <tr>
        <td>0.005</td>
        <td>0.974</td>
        <td>60</td>
        <td>10.4</td>
        <td>0.982</td>
        <td>141</td>
        <td>59.1</td>
    </tr>
    <tr>
        <td>0.01</td>
        <td>0.957</td>
        <td>56</td>
        <td>9.7</td>
        <td>0.981</td>
        <td>117</td>
        <td>48.9</td>
    </tr>
    <tr>
        <td>CentralAcc</td>
        <td colspan="6">0.988</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="3">FEMNIST LeNet FedAvg</td>
        <td colspan="3">FEMNIST LeNet FedSGD</td>
    </tr>
    <tr>
        <td>LR</td>
        <td>Acc</td>
        <td>CommRound</td>
        <td>TimeAll</td>
        <td>Acc</td>
        <td>CommRound</td>
        <td>TimeAll</td>
    </tr>
    <tr>
        <td>0.0001</td>
        <td>0.803</td>
        <td>120</td>
        <td>10.9</td>
        <td>0.651</td>
        <td>2000</td>
        <td>154</td>
    </tr>
    <tr>
        <td>0.0005</td>
        <td>0.846</td>
        <td>121</td>
        <td>9.4</td>
        <td>0.81</td>
        <td>2000</td>
        <td>153.6</td>
    </tr>
    <tr>
        <td>0.001</td>
        <td>0.843</td>
        <td>115</td>
        <td>8.5</td>
        <td>0.846</td>
        <td>2000</td>
        <td>151.9</td>
    </tr>
    <tr>
        <td>0.005</td>
        <td>0.763</td>
        <td>60</td>
        <td>4.8</td>
        <td>0.848</td>
        <td>618</td>
        <td>46.9</td>
    </tr>
    <tr>
        <td>0.01</td>
        <td>0.618</td>
        <td>72</td>
        <td>6.2</td>
        <td>0.848</td>
        <td>265</td>
        <td>20.6</td>
    </tr>
    <tr>
        <td>CentralAcc</td>
        <td colspan="6">0.85</td>
    </tr>
    <tr>
        <td></td>
        <td colspan="3">FEMNIST MLP FedAvg</td>
        <td colspan="3">FEMNIST MLP FedSGD</td>
    </tr>
    <tr>
        <td>LR</td>
        <td>Acc</td>
        <td>CommRound</td>
        <td>TimeAll</td>
        <td>Acc</td>
        <td>CommRound</td>
        <td>TimeAll</td>
    </tr>
    <tr>
        <td>0.0001</td>
        <td>0.798</td>
        <td>128</td>
        <td>36.8</td>
        <td>0.682</td>
        <td>2000</td>
        <td>441.6</td>
    </tr>
    <tr>
        <td>0.0005</td>
        <td>0.754</td>
        <td>81</td>
        <td>22.5</td>
        <td>0.779</td>
        <td>2000</td>
        <td>447.1</td>
    </tr>
    <tr>
        <td>0.001</td>
        <td>0.541</td>
        <td>74</td>
        <td>18.3</td>
        <td>0.814</td>
        <td>2000</td>
        <td>446.7</td>
    </tr>
    <tr>
        <td>0.005</td>
        <td>0.089</td>
        <td>29</td>
        <td>8.9</td>
        <td>0.703</td>
        <td>571</td>
        <td>126.2</td>
    </tr>
    <tr>
        <td>0.01</td>
        <td>0.067</td>
        <td>25</td>
        <td>7.7</td>
        <td>0.439</td>
        <td>344</td>
        <td>76.1</td>
    </tr>
    <tr>
        <td>CentralAcc</td>
        <td colspan="6">0.829</td>
    </tr>
</table>
------
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright .

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>